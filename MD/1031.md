# 多核和众核处理器

向量机 -> SIMD

多处理机 -> 多核处理器

多处理机的技术下移
SoC NoC

同时多线程SMT:在一条流水线上执行来自多个线程的指令

影子寄存器 shadow register



硬件机制。软件机制在设计的层次上较高，比较抽象便于理解但是速度就会变慢，与我们希望同时多进程处理器提高性能的目的有所冲突

线程切换时的基本过程
1.保存线程运行现场，将被替换线程的上下文保存到相应的缓存空间或者写回磁盘
2.线程环境切换，将替换线程的寄存器文件、程序计数器、上下文等加载到处理器中，更新如寄存器文件，页表等线程相关的上下文

额外的硬件支持
1.上下文缓存，因为频繁的线程切换会带来大量的访存操作所以需要上下文缓存记录换出换入的线程上下文信息
2.调度算法单元，监测处理器单元实现相应的调度算法例如基于给定优先级算法的抢占式调度



应该针对实际的应用场景选择具有优势的体系结构方案
同时避免一些重要的缺陷

比如
共享FPU以提高结构利用率，多整型计算单元来应对多线程指令
小心的设计内存访问方案避免类似CELL处理器采用DMA技术 Local Mem带来的性能损失
以及处理器和cache的通信结构也可能对处理器性能由影响
Tile64的MESH interconnection结构对人工智能加速计算有益
可能会面临Intel Sandy Bridge那样需要在操作系统等软件层面做大量工作来保证处理器性能

总而言之在体系结构的选择上，某些缺陷设计可能会牵一发而动全身，导致处理器整体性能的下降，适当避免这些问题或许对解决实际需求会更方便。或者这些设计能启发其他领域的发展。


能够访问
vector registers,
SIMD instructions,
block和grid的组成结构,
GPU 中local mem的数据

存内计算
SRAM
基于堆叠的存内计算架构

互连网络NOC